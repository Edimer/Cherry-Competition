install.packages(c("shinyWidgets", "shinydashboard"))
install.packages("installr")
install.packages("gamlss")
install.packages("devtools")
devtools::install_github("gadenbuie/rsthemes")
devtools::install_github("gadenbuie/rsthemes")
rsthemes::install_rsthemes()
install.packages(c("glue", "magrittr", "reticulate", "rlang", "stringi"))
setwd("C:/Users/damor/Desktop/Cherry-Competition")
install.packages("rgbif")
library(rgbif)
occ_search(
scientificName = "Prunus L.",
limit = 5000,
return = "data",
hasCoordinate = TRUE,
country = "JP"
)
?rgbif
cherry_CA <-
occ_search(
scientificName = "Prunus L.",
return = "data",
hasCoordinate = TRUE,
country = "CA"
)
cherry_JP <-
occ_search(
scientificName = "Prunus L.",
return = "data",
hasCoordinate = TRUE,
country = "JP"
)
cherry_SW <-
occ_search(
scientificName = "Prunus L.",
return = "data",
hasCoordinate = TRUE,
country = "CH"
)
cherry_US <-
occ_search(
scientificName = "Prunus L.",
return = "data",
hasCoordinate = TRUE,
country = "US"
)
cherry_CA$meta
cherry_CA$hierarchy
cherry_CA$media
cherry_CA$facets
cherry_CA$data
cherry_CA$data %>% View
cherry_US$data %>% View
install.packages(c("raster", "sf", "rgdal", "gdalUtils"))
min(cherry_US$data$decimalLatitude)
max(cherry_US$data$decimalLatitude)
min(cherry_US$data$decimalLongitude)
max(cherry_US$data$decimalLongitude)
install.packages("rasterVis")
min(cherry_US$data$decimalLatitude)
max(cherry_US$data$decimalLatitude)
min(cherry_US$data$decimalLongitude)
max(cherry_US$data$decimalLongitude)
remotes::install_github("mikejohnson51/AOI")
remotes::install_github("mikejohnson51/climateR")
remotes::install_github("mikejohnson51/climateR")
remotes::install_github("mikejohnson51/climateR", force = TRUE)
remotes::install_github("mikejohnson51/AOI")
?climateR::getTerraClim
?climateR::getGridMET
climateR::param_meta$terraclim
climateR::param_meta$terraclim %>% View
climateR::param_meta$terraclim
climateR::param_meta$terraclim
climateR::param_meta$terraclim
library(AOI)
library(climateR)
library(sf)
library(raster)
library(rasterVis)
aoi_get(state = "Washington")
WDC <- aoi_get(state = "Washington")
rm(WDC)
AOI <- aoi_get(state = "Washington")
plot(AOI$geometry)
min(cherry_US$data$decimalLatitude)
max(cherry_US$data$decimalLatitude)
min(cherry_US$data$decimalLongitude)
max(cherry_US$data$decimalLongitude)
minLat <- min(cherry_US$data$decimalLatitude)
maxLat <- max(cherry_US$data$decimalLatitude)
minLon <- min(cherry_US$data$decimalLongitude)
maxLon <- max(cherry_US$data$decimalLongitude)
st_bbox(c(xmin = minLon, xmax = maxLon, ymin = minLat, ymax = maxLat),
crs = 4326) %>%
getTerraClim(startDate = "1900-01-01", endDate = "2022-02-26")
st_bbox(c(xmin = minLon, xmax = maxLon, ymin = minLat, ymax = maxLat),
crs = 4326) %>%
getTerraClim(startDate = "1958-01-01", endDate = "2019-12-31")
param_meta$terraclim
param_meta$gridmet
st_bbox(c(xmin = minLon, xmax = maxLon, ymin = minLat, ymax = maxLat),
crs = 4326) %>%
getTerraClim(startDate = "1958-01-01", endDate = "2019-12-31",
param = "tmin")
st_bbox(c(xmin = minLon, xmax = maxLon, ymin = minLat, ymax = maxLat),
crs = 4326) %>%
getTerraClim(startDate = "2000-01-01",
param = "tmin")
getTerraClim(aoi_get(state = "Washington"),
param = "tmin",
startDate = "2000-01-01")
install.packages("spectator")
WDC_coord <-
st_bbox(c(xmin = minLon, xmax = maxLon, ymin = minLat, ymax = maxLat),
crs = 4326) %>%
getTerraClim(startDate = "2000-01-01",
param = "tmin")
WDC_sinCoord <-
getTerraClim(aoi_get(state = "Washington"),
param = "tmin",
startDate = "2000-01-01")
WDC_coord
WDC_sinCoord
param_meta$terraclim
WDC_sinCoord$terraclim_tmin
WDC_sinCoord
WDC_coord
WDC_coord$terraclim_tmin
WDC_coord %>%
st_as_sf()
WDC_coord %>% tibble::tibble()
WDC_coord[2]
sf::st_as_sfc(WDC_coord)
sf::st_as_sfc(WDC_coord$terraclim_tmin)
raster::as.data.frame(WDC_coord)
WDC_coord
WDC_coord$terraclim_tmin@layers
WDC_coord$terraclim_tmin@filename
WDC_coord$terraclim_tmin@z
WDC_coord$terraclim_tmin@rotated
WDC_coord$terraclim_tmin@ncols
extract_sites(WDC_coord)
WDC_coord %>%
st_as_sf(coords = c("long", "lat"), crs = 4326)
WDC_coord$terraclim_tmin[1:5, 1:5]
WDC_coord$terraclim_tmin[1:100, 1:100]
WDC_coord
WDC_coord$terraclim_tmin[1:100, 2:100]
WDC_coord$terraclim_tmin[1:5, 2:5]
WDC_coord$terraclim_tmin[1:5]
WDC_coord$terraclim_tmin[1:5,]
WDC_coord
WDC_coord <-
st_bbox(c(xmin = minLon, xmax = maxLon, ymin = minLat, ymax = maxLat),
crs = 4326) %>%
getTerraClim(startDate = "2000-01-01",
endDate = "2000-12-31",
param = "tmin")
WDC_coord
WDC_coord$terraclim_tmin[1:5,]
WDC_sinCoord <-
getTerraClim(aoi_get(state = "Washington"),
param = "tmin",
startDate = "2000-01-01",
endDate = "2000-12-31")
WDC_coord
WDC_sinCoord
param_meta$terraclim
WDC_coord$terraclim_tmin[1:5,]
WDC_sinCoord
nlayers(WDC_sinCoord)
nlayers(WDC_sinCoord$terraclim_tmin)
plot(AOI$geometry)
WDC_sinCoord <-
getTerraClim(aoi_get(state = "Washington"),
param = "tmin",
startDate = "1958-01-01",
endDate = "2019-12-31")
WDC_sinCoord
param_meta$terraclim
variables <- c("aet", "water_deficit", "palmer", "soilm", "tmax",
"tmin")
WDC_sinCoord
library(tidyverse)
datos <- read_csv("data/processed/cherry_bioclim_soilgrids.csv")
datos
prueba_sf %>%
st_as_sf(coords = c(3, 2),
crs = "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0")
datos %>%
st_as_sf(coords = c(3, 2),
crs = "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0")
prueba_sf <-
datos %>%
st_as_sf(coords = c(3, 2),
crs = "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0")
raster::extract(WDC_sinCoord)
raster::extract(WDC_sinCoord, prueba_sf)
raster::extract(WDC_sinCoord$terraclim_tmin, prueba_sf)
extract(WDC_sinCoord$terraclim_tmin, prueba_sf)
raster::extract(WDC_sinCoord$terraclim_tmin, prueba_sf) %>%
as_tibble()
raster::extract(WDC_sinCoord$terraclim_tmin, prueba_sf) %>%
as_tibble() %>%
set_names(c(str_c("tmin", names(.))))
raster::extract(WDC_sinCoord$terraclim_tmin, prueba_sf) %>%
as_tibble() %>%
set_names(c(str_c("tmin_", names(.))))
744*6
?getTerraClim
getTerraClim(aoi_get(country = "Japan"),
param = "tmin",
startDate = "1958-01-01",
endDate = "2019-12-31")
getTerraClim(aoi_get(country = "JP"),
param = "tmin",
startDate = "1958-01-01",
endDate = "2019-12-31")
getTerraClim(aoi_get(country = "japan"),
param = "tmin",
startDate = "1958-01-01",
endDate = "2019-12-31")
getTerraClim(aoi_get(state = "Washington"),
param = "tmin",
startDate = "1958-01-01",
endDate = "2019-12-31")
getTerraClim(aoi_get(country = "japan"),
param = "tmin",
startDate = "1958-01-01",
endDate = "2019-12-31")
library(AOI)
library(climateR)
library(sf)
library(raster)
library(rasterVis)
getTerraClim(aoi_get(country = "japan"),
param = "tmin",
startDate = "1958-01-01",
endDate = "2019-12-31")
plot(aoi_get(country = "japan"))
getTerraClim(aoi_get(country = "japan"),
param = "tmin",
startDate = "1958-01-01",
endDate = "2019-12-31") %>%
raster::extract(.$terraclim_tmin, prueba_sf) %>%
as_tibble() %>%
set_names(c(str_c("tmin_", names(.))))
library(tidyverse)
getTerraClim(aoi_get(country = "japan"),
param = "tmin",
startDate = "1958-01-01",
endDate = "2019-12-31") %>%
raster::extract(.$terraclim_tmin, prueba_sf) %>%
as_tibble() %>%
set_names(c(str_c("tmin_", names(.))))
getTerraClim(aoi_get(country = "japan"),
param = c("tmin","tmax"),
startDate = "1958-01-01",
endDate = "2019-12-31")
source("code-R/functions/limits_function.R")
limits_function(data_sf = prueba_sf)
st_bbox(limits_function(data_sf = prueba_sf),
crs = 4326)
terra_climate <-
st_bbox(limits_function(data_sf = prueba_sf),
crs = 4326) %>%
getTerraClim(startDate = "1958-01-01",
endDate = "2019-12-31",
param = variables)
library(AOI)
library(climateR)
library(sf)
library(raster)
library(rasterVis)
terra_climate <-
st_bbox(limits_function(data_sf = prueba_sf),
crs = 4326) %>%
getTerraClim(startDate = "1958-01-01",
endDate = "2019-12-31",
param = variables)
terra_climate <-
st_bbox(limits_function(data_sf = prueba_sf)) %>%
getTerraClim(startDate = "1958-01-01",
endDate = "2019-12-31",
param = variables)
crs(prueba_sf)
CRS(prueba_sf)
crs(prueba_sf)
crs(prueba_sf) %>% class
crs(prueba_sf) %>% attributes
crs(prueba_sf)$projargs
crs(prueba_sf)@projargs
st_bbox(limits_function(data_sf = prueba_sf),
crs = crs(prueba_sf)@projargs)
terra_climate <-
st_bbox(limits_function(data_sf = prueba_sf),
crs = crs(prueba_sf)@projargs) %>%
getTerraClim(startDate = "1958-01-01",
endDate = "2019-12-31",
param = variables)
terra_climate <-
st_bbox(limits_function(data_sf = prueba_sf),
crs = crs(prueba_sf)@projargs) %>%
getTerraClim(startDate = "1958-01-01",
endDate = "2019-12-31",
param = "tmin")
terra_climate <-
st_bbox(limits_function(data_sf = prueba_sf),
crs = crs(prueba_sf)@projargs) %>%
getTerraClim(startDate = "2019-01-01",
endDate = "2019-12-31",
param = "tmin")
library(tidyverse)
limits_function(data_sf = prueba_sf %>%
filter(new_location == "Japan"))
terra_climate <-
st_bbox(limits_function(data_sf = prueba_sf %>%
filter(new_location == "Japan")),
crs = crs(prueba_sf)@projargs) %>%
getTerraClim(startDate = "1958-01-01",
endDate = "2019-12-31",
param = "tmin")
getTerraClim(aoi_get(country = "japan"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31")
limits_function(data_sf = prueba_sf)
terra_climate <-
st_bbox(c(xmin = -9142312, xmax = 13574453, ymin = 2709145, ymax = 5300518),
crs = crs(prueba_sf)@projargs) %>%
getTerraClim(startDate = "1958-01-01",
endDate = "2019-12-31",
param = variables)
terra_climate <-
st_bbox(c(xmin = -9142312, xmax = 13574453, ymin = 2709145, ymax = 5300518),
crs = 4326) %>%
getTerraClim(startDate = "1958-01-01",
endDate = "2019-12-31",
param = variables)
getTerraClim(aoi_get(country = "switzerland"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31")
getTerraClim(aoi_get(state = "Kyoto"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31")
getTerraClim(aoi_get(state = "kyoto"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31")
getTerraClim(aoi_get(state = "ontario"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31")
getTerraClim(aoi_get(state = "Ontario"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31")
getTerraClim(aoi_get(country = "canada"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31")
library(AOI)
library(climateR)
library(sf)
library(raster)
library(rasterVis)
library(tidyverse)
wdc_TC <-
getTerraClim(
aoi_get(state = "Washington"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31"
)
japan_TC <-
getTerraClim(
aoi_get(country = "japan"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31"
)
suiza_TC <-
getTerraClim(
aoi_get(country = "switzerland"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31"
)
canada_TC <-
getTerraClim(
aoi_get(country = "canada"),
param = variables,
startDate = "1958-01-01",
endDate = "2019-12-31"
)
wdc_TC$terraclim_aet
wdc_TC %>%
map(.f = as_tibble)
wdc_TC %>% class
wdc_TC %>% length()
wdc_TC$terraclim_aet %>% class
wdc_TC$terraclim_aet %>%
map(.f = as_tibble)
wdc_TC$terraclim_aet %>% as_tibble()
wdc_TC$terraclim_aet %>% as_tibble()
wdc_TC$terraclim_aet %>% as.data.frame()
wdc_TC %>%
map(.f = as.data.frame)
wdc_TC %>% names
names_TC <- wdc_TC %>% names
names_TC
wdc_TC %>%
map(.f = as.data.frame) %>%
map(.f = class)
labels_terra <- function(x) {
res = x %>%
set_names(c(str_c("david", names(x))))
}
wdc_TC %>%
map(.f = as.data.frame) %>%
map(.f = labels_terra)
attributes(wdc_TC)
labels_terra <- function(x) {
res = x %>%
set_names(c(str_c(names_TC, names(x))))
}
wdc_TC %>%
map(.f = as.data.frame) %>%
map(.f = labels_terra)
wdc_TC %>%
map(.f = as.data.frame) %>%
map(.f = attributes)
wdc_TC %>%
map(.f = as.data.frame) %>%
bind_rows()
wdc_TC %>%
map(.f = as.data.frame) %>%
bind_rows() %>% names
param_meta$terraclim
param_meta$terraclim
wdc_TC <-
getTerraClim(
aoi_get(state = "Washington"),
param = "palmer",
startDate = "1958-01-01",
endDate = "2019-12-31"
)
raster::extract(wdc_TC$terraclim_palmer, prueba_sf) %>%
as_tibble() %>%
set_names(c(str_c("palmer_", names(.))))
david <-
raster::extract(wdc_TC$terraclim_palmer, prueba_sf) %>%
as_tibble() %>%
set_names(c(str_c("palmer_", names(.))))
david %>% View
david <-
raster::extract(wdc_TC$terraclim_palmer, prueba_sf) %>%
as_tibble() %>%
set_names(c(str_c("palmer_", names(.)))) %>%
bind_cols(datos, .)
david %>% View
